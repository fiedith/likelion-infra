---
맛집 랭킹 서비스 요구사항분석

1. 1~5점 사이의 별점
    - 이외의 숫자를 입력하면 알람
2. 리뷰
   - 언제든지 수정, 삭제 가능
   - 최소 글자수 10자
3. 별점 + 리뷰: 필수
4. 사용자들이 입력한 별점을 모아 각 맛집의 평균 별점을 계산
   - 평균 별점이 높은 맛집부터 순위 매김
5. 랭킹 갱신
   - 실시간 x
   - 사용자가 새로 평가를 남기거나, 기존 평가를 변경하면 별점을 다시 계산 후 그 값을 기준으로 랭킹 갱신
6. 한 사용자가 여러번 평가한다면?
   - 가장 최근의 평가만 유효하도록 설정
   - 랭킹 계산 시에는 마지막 평가만 반영
---
# 주어진 요구사항 분석
- 매장은 메뉴를 갖는다.
- 사용자는 매장의 메뉴를 주문할 수 있다.
- 사용자는 매 주문 건에 대해 리뷰를 남길 수 있다.
  - 리뷰는 별점(1~5)과 텍스트(10~)로 구성된다.
  - 사용자는 별점과 텍스트를 언제든지 수정하거나 삭제할 수 있다.
- 매장은 전체 리뷰에 대한 평균 별점을 갖는다.
  - 각 사용자가 마지막으로 작성한 리뷰의 별점만이 평균 별점 산정에 반영된다.
  - 사용자가 마지막으로 작성한 리뷰를 삭제하거나 수정할 때마다 평균 별점은 재산정된다.
    - 사용자가 리뷰를 삭제하는 경우, 사용자가 그 이전에 남긴 리뷰가 존재하는 경우 그 리뷰가 평균 별점 산정에 활용된다.
  - 평균 별점은 소수점 두자리에서 끊는다.
- 매장의 평균 별점은 맛집 랭킹에 활용된다.
  - 평균 별점이 가장 높은 매장부터 순서대로 랭킹을 갖는다.
  - 리뷰가 없는 매장은 랭킹에서 제외된다.
- 서비스에 등록된 각 매장의 평균 별점이 재산정될 때마다 맛집 랭킹이 갱신된다.

---
# 추가로 고민해볼 점

### 1. 매 매장 평균 별점 갱신 시마다 랭킹 갱신을 같이 하면 부하가 심하지 않을까?

- 랭킹 재갱신 시간대를 정해서 하는 방법
  - e.g.) 매시 정각에 맛집 랭킹을 재갱신하는 방법 

### 2. 리뷰 1개 평균평점 5.0점 vs. 리뷰 100개 평균평점 4.9

### 3. 평균평점이 동점인 경우 어떻게 랭킹을 처리할 것인가?

- 리뷰 수가 더 많은 매장이 랭킹에서 우선순위를 갖도록 하는 방법
  - 리뷰 수까지 동일하다면 매장의 가장 최근 리뷰의 별점을 기준으로 랭킹 산정
    - 가장 최근 리뷰 별점까지 동일하다면 alphabetical 순서로 산정

### 4. 맛집 랭킹 리스트는 전 지역 매장 통틀어서 유일하게 존재하게 할 것인가?

- 지역별로 랭킹 리스트 나누기
---
# 🍽️ 맛집 랭킹 분석 기능  

## ✅ 랭킹 생성 기준  
- **1~5점 사이의 별점**과 **10자 이상 리뷰** 필수 입력  
- **평균 별점이 높은 순으로 랭킹 생성**  
- **리뷰 100개 이상인 맛집만 랭킹 등록**  
- **평가가 없는 맛집은 제외**  

## 🔄 평가 관리  
- **사용자는 동일 맛집에 여러 번 평가 가능 (마지막 평가만 반영)**  
- **평가는 언제든지 수정 및 삭제 가능**  
- **새로운 평가 추가/수정 시 실시간 반영**  
- **별점은 1~5점만 입력 가능 (이외의 값은 차단 및 알림 처리)**  

## 📊 순위 결정 방식  
1. **평균 별점이 높은 순**  
2. **동점 시 리뷰 개수가 많은 순**  
3. **리뷰 개수까지 동일하면 최신 리뷰의 별점이 높은 순**  
4. **지역구별 랭킹 분류**  
---
